---
title: pm2 è¿›ç¨‹ç®¡ç†å·¥å…·
author: æå»¶èƒœ
abbrlink: 49317
tags:
  - å·¥å…·
categories: []
date: 2024-04-30 13:46:00
index_img: ../img/pm2.png

---


> å®˜ç½‘ï¼šhttps://pm2.keymetrics.io/

## ä»‹ç»

>PM2æ˜¯ä¸€ä¸ªæµè¡Œçš„Node.jsè¿›ç¨‹ç®¡ç†å™¨ã€‚å®ƒå…è®¸ä½ ç®€åŒ–Node.jsåº”ç”¨ç¨‹åºçš„éƒ¨ç½²å’Œç®¡ç†ã€‚PM2å¯ä»¥å¸®åŠ©ä½ åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ç®¡ç†Node.jsè¿›ç¨‹ï¼ŒåŒ…æ‹¬å¯åŠ¨ã€åœæ­¢ã€é‡å¯åº”ç”¨ç¨‹åºï¼Œä»¥åŠç›‘è§†åº”ç”¨ç¨‹åºçš„çŠ¶æ€å’Œæ—¥å¿—ã€‚å®ƒè¿˜å…·æœ‰ä¸€äº›å…¶ä»–åŠŸèƒ½ï¼Œæ¯”å¦‚è´Ÿè½½å‡è¡¡ã€è‡ªåŠ¨é‡æ–°å¯åŠ¨ã€å†…å­˜ç›‘æ§ç­‰ã€‚ PM2è¿˜æä¾›äº†ä¸€ä¸ªç®€å•çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œä½¿å¾—ç®¡ç†å’Œç›‘æ§Node.jsåº”ç”¨ç¨‹åºå˜å¾—æ›´åŠ æ–¹ä¾¿ã€‚

## å¸¸ç”¨å‘½ä»¤

**å¯åŠ¨åº”ç”¨ç¨‹åº**ï¼š

```
pm2 start <app.js>
```

**åœæ­¢åº”ç”¨ç¨‹åº**ï¼š

```
pm2 stop <app_name|app_id>
```

**é‡å¯åº”ç”¨ç¨‹åº**ï¼š

```
pm2 restart <app_name|app_id>
```

**é‡æ–°åŠ è½½åº”ç”¨ç¨‹åº**ï¼ˆä¸å…³é—­æœåŠ¡ï¼‰ï¼š

```
pm2 reload <app_name|app_id>
```

**æŸ¥çœ‹åº”ç”¨ç¨‹åºåˆ—è¡¨**ï¼š

```
pm2 list
```

**æŸ¥çœ‹åº”ç”¨ç¨‹åºè¯¦ç»†ä¿¡æ¯**ï¼š

```
pm2 show <app_name|app_id>
```

**æŸ¥çœ‹å®æ—¶æ—¥å¿—**ï¼š

```
pm2 logs <app_name|app_id>
```

**æ¸…é™¤æ—¥å¿—**ï¼š

```
pm2 flush
```

**ç›‘è§†æ¨¡å¼å¯åŠ¨åº”ç”¨ç¨‹åº**ï¼ˆä¼šè‡ªåŠ¨é‡å¯ï¼‰ï¼š

```
pm2 start <app.js> --watch
```

**è®¾ç½®åº”ç”¨ç¨‹åºçš„æ•°é‡**ï¼ˆç”¨äºè´Ÿè½½å‡è¡¡ï¼‰ï¼š

```
pm2 scale <app_name|app_id> <number_of_instances>
```

è¿™åªæ˜¯å…¶ä¸­çš„ä¸€éƒ¨åˆ†å‘½ä»¤ï¼ŒPM2è¿˜æœ‰æ›´å¤šåŠŸèƒ½å’Œé€‰é¡¹ï¼Œä½ å¯ä»¥é€šè¿‡æŸ¥é˜…å®˜æ–¹æ–‡æ¡£æ¥è·å–æ›´å¤šä¿¡æ¯ã€‚

## æ¡ˆä¾‹

> ä½¿ç”¨pm2ç®¡ç†hexo è¿›ç¨‹ï¼Œä½¿å…¶å¯ä»¥åœ¨åå°æŒç»­è¿è¡Œ

1. å®‰è£…

    ```js
    npm install -g pm2
    ```

2. åœ¨hexoæ ¹ç›®å½•æ–°å»ºè¿è¡Œæ–‡ä»¶ï¼Œå¦‚`hexo_run.js`

    ```js
    //run
    const { exec } = require('child_process')
    exec('hexo server',(error, stdout, stderr) => {
            if(error){
                    console.log('exec error: ${error}')
                    return
            }
            console.log('stdout: ${stdout}');
            console.log('stderr: ${stderr}');
    })
    ```

3. å¯åŠ¨è¿›ç¨‹æœåŠ¡ 

    ```
    [root@Lys-Server hexo-blog]# pm2 start hexo_run.js 
    [PM2] Starting /root/hexo/hexo-blog-originfile/hexo_run.js in fork_mode (1 instance)
    [PM2] Done.
    â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ id â”‚ name               â”‚ mode     â”‚ â†º    â”‚ status    â”‚ cpu      â”‚ memory   â”‚
    â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ 0  â”‚ hexo_run           â”‚ fork     â”‚ 0    â”‚ online    â”‚ 0%       â”‚ 15.3mb   â”‚
    â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    ```

4. è¿™æ ·å°±OKäº†ğŸ˜